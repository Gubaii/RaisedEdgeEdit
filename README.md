# 3D形状编辑器

一个基于Web的3D形状编辑工具，通过灰度图技术实现矢量形状的三维建模，支持圆角和切角效果。

## 功能特性

- 📁 **多格式支持**: 支持SVG、PNG、JPG等格式文件上传
- 🎨 **边缘效果**: 支持垂直、圆角、切角三种边缘类型
- 🔧 **参数调节**: 可调节圆角半径、切角角度等参数
- 👀 **实时预览**: 基于Three.js的实时3D预览
- 💾 **STL导出**: 支持导出STL格式用于3D打印

## 技术架构

- **前端框架**: React 18 + TypeScript
- **3D渲染**: Three.js + React Three Fiber
- **样式**: Tailwind CSS
- **构建工具**: Vite
- **图标**: Lucide React

## 安装运行

### 1. 安装依赖

```bash
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

应用将在 `http://localhost:3000` 启动。

### 3. 构建生产版本

```bash
npm run build
```

### 4. 预览生产版本

```bash
npm run preview
```

## 使用指南

### 文件上传

1. **SVG文件**: 支持矢量图形，保持最佳清晰度
2. **PNG/JPG文件**: 自动提取轮廓，转换为3D模型

### 参数设置

- **模型高度**: 设置3D模型的总高度（单位：mm）
- **边缘类型**:
  - 垂直边缘：直角边缘，无过渡
  - 圆角边缘：圆滑过渡，可调节半径
  - 切角边缘：斜面过渡，可调节角度

### 3D预览

- 鼠标拖拽：旋转视角
- 滚轮：缩放模型
- 实时更新：参数修改后立即更新预览

### STL导出

点击"导出STL文件"按钮，生成的STL文件可用于3D打印或其他CAD软件。

## 技术原理

### 灰度图生成

1. **轮廓提取**: 从上传的图像中提取形状轮廓
2. **距离场计算**: 计算每个像素到边缘的距离
3. **边缘效果应用**: 根据选择的边缘类型生成对应的高度值

### 边缘算法

- **圆角**: 使用圆形函数计算高度渐变
- **切角**: 使用线性渐变创建斜面效果
- **垂直**: 直接使用二值化结果

### 3D渲染

- 将灰度图作为高度贴图（heightmap）
- 使用Three.js的PlaneGeometry生成网格
- 根据灰度值调整顶点高度

## 项目结构

```
src/
├── components/          # React组件
│   ├── FileUpload.tsx   # 文件上传组件
│   ├── ParameterPanel.tsx # 参数控制面板
│   └── ThreeViewer.tsx  # 3D预览组件
├── utils/              # 工具函数
│   ├── imageProcessor.ts # 图像处理
│   └── stlExporter.ts   # STL导出
├── types/              # TypeScript类型定义
│   └── index.ts
├── App.tsx             # 主应用组件
├── main.tsx            # 应用入口
└── index.css           # 全局样式
```

## 开发计划

- [ ] 优化距离场算法性能
- [ ] 增加更多边缘效果类型
- [ ] 支持多层高度叠加
- [ ] 增加材质和纹理选项
- [ ] 支持批量处理
- [ ] 增加预设模板

## 许可证

MIT License 